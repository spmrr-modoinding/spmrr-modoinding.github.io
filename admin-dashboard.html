<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Pelaporan Paroki</title>
    <link href="logo-paroki2.png" rel="icon" type="image/png"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
    <link rel="stylesheet" href="admin-dashboard.css">
</head>
<body>
    <header class="dashboard-header">
        <div class="header-content">
            <div class="welcome-message">
                <img src="logo-paroki.png" alt="Logo">
                <h1 id="welcome-title">Admin Dashboard</h1>
            </div>
            <button id="logout-button" class="logout-button">
                <i class="bi bi-box-arrow-right"></i> Logout
            </button>
        </div>
    </header>

    <main class="dashboard-main">
        <div class="table-container">
            <div class="table-header">
                <h2><i class="bi bi-file-earmark-text-fill"></i> Rekapitulasi Program Kerja 2025</h2>
                <div class="action-buttons">
                    <button class="action-btn" id="add-program-btn"><i class="bi bi-plus-square-fill"></i> Tambah Program</button>
                    <button class="action-btn" id="print-btn"><i class="bi bi-printer-fill"></i> Print Laporan</button>
                </div>
            </div>
            <div class="table-wrapper">
                <table id="programs-table">
                    <thead>
                        <tr>
                            <th>Wilayah Rohani/Kategorial</th>
                            <th>Program/Kegiatan</th>
                            <th>Sasaran</th>
                            <th>Indikator Keberhasilan</th>
                            <th>Model/Materi</th>
                            <th>Waktu & Tempat</th>
                            <th>PIC</th>
                            <th>Rincian Anggaran</th>
                            <th>Total</th>
                            <th>Sumber Dana</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="programs-table-body">
                        <tr>
                            <td colspan="11" style="text-align:center;">Memuat data...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <div id="add-program-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Tambah Program Kerja Baru</h2>
                <button class="close-modal-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="modal-program-form">
                    <div class="form-section">
                        <div class="input-group">
                            <label for="modal-nama-unit">Wilayah Rohani / Kelompok Kategorial</label>
                            <input type="text" id="modal-nama-unit" name="nama_unit" required>
                        </div>
                        <div class="input-group">
                            <label for="modal-bidang">Bidang Program</label>
                            <select id="modal-bidang" name="bidang" required>
                                <option value="" disabled selected>Pilih Bidang...</option>
                                <option value="BIDANG I">BIDANG I: Menjaga Persekutuan dan Kepemimpinan</option>
                                <option value="BIDANG II">BIDANG II: Menjaga Perbendaharaan Iman</option>
                                <option value="BIDANG III">BIDANG III: Pelayanan Sabda Dan Sakramen</option>
                                <option value="BIDANG IV">BIDANG IV: Memajukan Martabat & Peran Kaum Awam</option>
                                <option value="BIDANG V">BIDANG V: Pendidikan Katolik</option>
                                <option value="BIDANG VI">BIDANG VI: Pengelolaan Harta Benda Gereja</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="modal-nama_kegiatan">Nama Program / Kegiatan</label>
                            <input type="text" id="modal-nama_kegiatan" name="nama_kegiatan" required>
                        </div>
                        <div class="input-group">
                            <label for="modal-sasaran">Sasaran</label>
                            <input type="text" id="modal-sasaran" name="sasaran">
                        </div>
                         <div class="input-group">
                            <label for="modal-indikator">Indikator Keberhasilan</label>
                            <input type="text" id="modal-indikator" name="indikator">
                        </div>
                         <div class="input-group">
                            <label for="modal-model">Model / Materi</label>
                            <input type="text" id="modal-model" name="model">
                        </div>
                        <div class="input-group">
                            <label for="modal-waktu">Tempat & Waktu</label>
                            <input type="text" id="modal-waktu" name="waktu">
                        </div>
                        <div class="input-group">
                            <label for="modal-pic">Penanggung Jawab (PIC)</label>
                            <input type="text" id="modal-pic" name="pic">
                        </div>
                        <div class="input-group">
                            <label for="modal-sumber_dana">Sumber Dana Utama</label>
                            <input type="text" id="modal-sumber_dana" name="sumber_dana">
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>Rincian Anggaran</h3>
                        <div id="modal-anggaran-items-container"></div>
                        <button type="button" id="modal-add-anggaran-btn" class="add-btn">
                            <i class="bi bi-plus-circle"></i> Tambah Rincian
                        </button>
                        <div class="total-anggaran">
                            <strong>Total: <span id="modal-total-anggaran-display">Rp 0</span></strong>
                        </div>
                    </div>
                    <div class="submit-section">
                        <button type="submit" class="submit-btn">Simpan Program</button>
                        <p id="modal-form-message" class="form-message"></p>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script src="admin-dashboard.js"></script>
</body>
</html>