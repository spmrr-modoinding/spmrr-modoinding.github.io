<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Pelaporan Paroki</title>
    <link href="logo-paroki2.png" rel="icon" type="image/png"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
    <link rel="stylesheet" href="admin-dashboard.css">
</head>
<body>
    <header class="dashboard-header no-print">
        <div class="header-content">
            <div class="welcome-message">
                <img src="logo-paroki.png" alt="Logo">
                <h1 id="welcome-title">Admin Dashboard</h1>
            </div>
            <button id="logout-button" class="logout-button">
                <i class="bi bi-box-arrow-right"></i> Logout
            </button>
        </div>
    </header>

    <main class="dashboard-main">
        <div class="table-container">
            <div class="table-header">
                <h2><i class="bi bi-file-earmark-text-fill"></i> PROGRAM KERJA PAROKI TAHUN 2025</h2>
                <div class="action-buttons no-print">
                    <button class="action-btn" id="add-program-btn"><i class="bi bi-plus-square-fill"></i> Tambah Program</button>
                    <button class="action-btn" id="print-btn"><i class="bi bi-printer-fill"></i> Print Laporan</button>
                </div>
            </div>
            <div class="table-wrapper">
                <table id="programs-table">
                    <thead>
                        <tr>
                            <th rowspan="2">Pusat Paroki/<br>Stasi</th>
                            <th rowspan="2">Wilayah Rohani/<br>Kelompok Kategorial</th>
                            <th rowspan="2">Program/Kegiatan</th>
                            <th rowspan="2">Sasaran</th>
                            <th rowspan="2">Indikator<br>Keberhasilan</th>
                            <th rowspan="2">Model</th>
                            <th rowspan="2">Materi</th>
                            <th rowspan="2">Tempat & Waktu</th>
                            <th rowspan="2">PIC</th>
                            <th colspan="5">Perincian Anggaran</th>
                            <th rowspan="2">Total</th>
                            <th colspan="2">Sumber Dana</th>
                            <th rowspan="2" class="no-print">Aksi</th>
                        </tr>
                        <tr>
                            <th>Perincian</th>
                            <th>Vol</th>
                            <th>Satuan</th>
                            <th>Satuan Harga</th>
                            <th>Jumlah</th>
                            <th>Kas Paroki</th>
                            <th>Swadaya</th>
                        </tr>
                    </thead>
                    <tbody id="programs-table-body">
                        <!-- Data akan dimuat oleh JavaScript di sini -->
                    </tbody>
                    <tfoot id="table-footer">
                        <!-- Grand Total akan dimuat oleh JavaScript di sini -->
                    </tfoot>
                </table>
            </div>
        </div>
    </main>

    <!-- Modal Tambah/Edit Program -->
    <div id="add-program-modal" class="modal-overlay hidden no-print">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Tambah Program Kerja Baru</h2>
                <button class="close-modal-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="modal-program-form">
                    <div class="form-section">
                        <div class="input-group">
                            <label for="modal-bidang">Bidang Program</label>
                            <select id="modal-bidang" required>
                                <option value="" disabled selected>Pilih Bidang...</option>
                                <option value="BIDANG I : MENJAGA PERSEKUTUAN DAN KEPEMIMPINAN YANG MELAYANI">BIDANG I</option>
                                <option value="BIDANG II : Menjaga Perbendaharaan Iman">BIDANG II</option>
                                <option value="BIDANG III : Pelayanan Sabda Dan Sakramen-Sakramen">BIDANG III</option>
                                <option value="BIDANG IV : Memajukan Martabat & Peran Kaum Awam">BIDANG IV</option>
                                <option value="BIDANG V : Pendidikan Katolik">BIDANG V</option>
                                <option value="BIDANG VI : Pengelolaan Harta Benda Gereja">BIDANG VI</option>
                            </select>
                        </div>
                         <div class="input-group">
                            <label for="modal-sub-bidang">Judul Sub-Kelompok (cth: 1. Menata Struktur...)</label>
                            <input type="text" id="modal-sub-bidang" required>
                        </div>
                        <hr>
                        <div class="input-group">
                            <label for="modal-lokasi">Pusat Paroki / Stasi</label>
                            <select id="modal-lokasi" required>
                                <option value="" disabled selected>Pilih Lokasi...</option>
                                <option value="Pusat Paroki">Pusat Paroki</option>
                                <option value="Stasi">Stasi</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="modal-nama-unit">Wilayah Rohani / Kelompok Kategorial</label>
                            <input type="text" id="modal-nama-unit" required>
                        </div>
                        <div class="input-group">
                            <label for="modal-nama_kegiatan">Nama Program / Kegiatan</label>
                            <input type="text" id="modal-nama_kegiatan" required>
                        </div>
                        <div class="input-group">
                            <label for="modal-sasaran">Sasaran</label>
                            <input type="text" id="modal-sasaran">
                        </div>
                        <div class="input-group">
                            <label for="modal-indikator">Indikator Keberhasilan</label>
                            <input type="text" id="modal-indikator">
                        </div>
                        <div class="input-group">
                            <label for="modal-model">Model</label>
                            <input type="text" id="modal-model">
                        </div>
                        <div class="input-group">
                            <label for="modal-materi">Materi</label>
                            <input type="text" id="modal-materi">
                        </div>
                        <div class="input-group">
                            <label for="modal-waktu">Tempat & Waktu</label>
                            <input type="text" id="modal-waktu">
                        </div>
                        <div class="input-group">
                            <label for="modal-pic">PIC</label>
                            <input type="text" id="modal-pic">
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>Sumber Dana</h3>
                        <div class="form-grid-sumber-dana">
                            <div class="input-group">
                                <label for="modal-sumber-dana-kas">Untuk Kolom "Kas Paroki"</label>
                                <select id="modal-sumber-dana-kas">
                                    <option value="-">Garis Datar (-)</option>
                                    <option value="Kas Paroki">Kas Paroki</option>
                                    <option value="Kas Stasi">Kas Stasi</option>
                                    <option value="Kas KBK">Kas KBK</option>
                                    <option value="Kas WR">Kas WR</option>
                                    <option value="Kas Sonar">Kas Sonar</option>
                                    <option value="Kas OMK">Kas OMK</option>
                                    <option value="DPP">DPP</option>
                                    <option value="KK">KK</option>
                                    <option value="KK DPP">KK DPP</option>
                                    <option value="KK Kategorial">KK Kategorial</option>
                                    <option value="KK Sekami">KK Sekami</option>
                                    <option value="KK Stasi">KK Stasi</option>
                                    <option value="KK PSE">KK PSE</option>
                                    <option value="KK KS">KK KS</option>
                                    <option value="KK WKRI">KK WKRI</option>
                                    <option value="KK Katekese">KK Katekese</option>
                                    <option value="Pencatatan Laporan">Pencatatan Laporan</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="modal-sumber-dana-swadaya">Untuk Kolom "Swadaya"</label>
                                <select id="modal-sumber-dana-swadaya">
                                     <option value="-">Garis Datar (-)</option>
                                     <option value="Swadaya">Swadaya</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Rincian Anggaran</h3>
                        <div id="modal-anggaran-items-container"></div>
                        <button type="button" id="modal-add-anggaran-btn" class="add-btn"><i class="bi bi-plus-circle"></i> Tambah Rincian</button>
                        <div class="total-anggaran">
                            <strong>Total Anggaran: <span id="modal-total-anggaran-display">Rp 0</span></strong>
                        </div>
                    </div>
                    <div class="submit-section">
                        <button type="submit" class="submit-btn">Simpan Program</button>
                        <p id="modal-form-message" class="form-message"></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script src="admin-dashboard.js"></script>
</body>
</html>
